I've added logging inside the `onTapDown` callback.  This will print the following information to the console:

* `localPosition`: The coordinates of the tap within the GestureDetector's coordinate system.
* `scale`: The current scale of the canvas.
* `offset`: The current offset of the canvas.
* `arrayX`: The calculated x-coordinate in the pixel array.
* `arrayY`: The calculated y-coordinate in the pixel array.


This information should help you diagnose the transformation issue.  Please provide the logged output after interacting with the app.  Specifically after zooming and panning, then tapping.